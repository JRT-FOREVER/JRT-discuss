<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>JRT-discuss论坛</title>
<script src="./public/vue.js"></script>
</head>

<body>
<div id="discuss">
  <h2>AJAX</h2>
  <button type="button" v-on:click="messageaa">请求数据</button>
  <div id="myDiv"></div>
  <div>{{ parentMessage }}</div>
</div>

<script>
var example2 = new Vue({
  el: '#discuss',
  data: {
    parentMessage: 'Parentss',
    items: [
      { message: 'Foo' },
      { message: 'Bar' }
    ]
  },

  methods: {
  messageaa: function () {
    //window.alert(5 + 6)
    xmlhttp=new XMLHttpRequest()
    xmlhttp.onreadystatechange=function()
  	{
  		if (xmlhttp.readyState==4 && xmlhttp.status==200)
  		{
        a=JSON.parse(xmlhttp.responseText)
  			document.getElementById("myDiv").innerHTML=a[0].body
        alert(a[0].body)
        this.parentMessage=a[0].body
  		}
  	}
    xmlhttp.open("GET","https://api.github.com/repos/JRT-FOREVER/JRT-discuss/issues/comments",true)
    //var a=1
  	xmlhttp.send()

  }}
})

/*
  function loadXMLDoc()
  {
  	var xmlhttp;
  	if (window.XMLHttpRequest)
  	{
  		// IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
  		xmlhttp=new XMLHttpRequest();
  	}
  	else
  	{
  		// IE6, IE5 浏览器执行代码
  		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  	}
  	xmlhttp.onreadystatechange=function()
  	{
  		if (xmlhttp.readyState==4 && xmlhttp.status==200)
  		{
  			document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
  		}
  	}
  	xmlhttp.open("GET","https://api.github.com/repos/JRT-FOREVER/JRT-discuss/issues/comments",true);
  	//xmlhttp.send();
  }
  */
  </script>
</body>

</html>
