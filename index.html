<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>JRT-discuss论坛</title>
  <script src="./public/vue.js"></script>
  <link rel="stylesheet" href="./public/layui/css/layui.css">
  <script src="./public/layui/layui.js"></script>

</head>

<body>
  <ul class="layui-nav" lay-filter="">
      <li class="layui-nav-item layui-this"><a href="">JRT-discuss论坛</a></li>
  </ul>

  <hr/>

<div id="discuss">
  <blockquote class="layui-elem-quote">如果我有一天能见到JavaScript的开发者，我一定会fuckfuckfuckfuck T</blockquote>

  <div id="myDiv"></div>
  <ul id="myDiv">
    <li v-for="(item, index) in items">
      <fieldset class="layui-elem-field">
        <legend><a v-bind:href="[ item.html_url ]" >{{ item.title }}</a></legend>
        <div class="layui-field-box">
          {{ item.body }}
          <div align="right">
            <div><i class="layui-icon">&#xe611;</i>{{ item.comments }}</div>
            <div>{{ item.updated_at }}</div>
          </div>
        </div>
      </fieldset>
      <!--{{ index }}
      <!--{{ item.user }}
      {{ item.body }}
      {{ item.updated_at }}-->
    </li>
  </ul>
  <div align="center">
    <a class="layui-btn" href="https://github.com/JRT-FOREVER/JRT-discuss/issues/new">新建帖子</a>
  </div>
</div>

<script>
var app = new Vue({
  el: '#discuss',
  data: {
    items: [
      { message: 'Foo' },
      { message: 'Bar' }
    ]
  },

  methods: {
    messageaa: function () {
      xmlhttp=new XMLHttpRequest()
      xmlhttp.onreadystatechange=function()
  	   {
         if (xmlhttp.readyState==4 && xmlhttp.status==200)
         {
           app.items=JSON.parse(xmlhttp.responseText)
           //items=JSON.parse(xmlhttp.responseText)
           //document.getElementById("myDiv").innerHTML=items[0].body
           //alert(items[0].body)
           //this.parentMessage=items[0].body
         }
       }
       xmlhttp.open("GET","https://api.github.com/repos/JRT-FOREVER/JRT-discuss/issues",true)
       //xmlhttp.open("GET","https://api.github.com/repos/JRT-FOREVER/JRT-discuss/issues/comments",true)
       xmlhttp.send()
       //this.items = xmlhttp.responseText
     }
   }
})
app.messageaa()
</script>
</body>

</html>
